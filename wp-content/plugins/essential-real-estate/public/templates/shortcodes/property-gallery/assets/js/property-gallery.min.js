!function(p){"use strict";var h=!0,m={vars:{filter_id:"",property_items:[]},init:function(){this.filterCarousel(),this.filterRow(),this.resize(),ERE.select_term()},filterCarousel:function(){p('[data-filter-type="carousel"]').each(function(){var e=p("a",p(this));m.executeFilter("filterCarousel",e)})},filterRow:function(){var e=p('[data-filter-type="filter"]'),t=e.data("item"),i=p("body").hasClass("rtl");void 0===t&&(t=".property-item"),p('[data-layout="fitRows"]').each(function(){var e=p(this);e.imagesLoaded(function(){e.isotope({itemSelector:t,layoutMode:"fitRows",isOriginLeft:!i,transitionDuration:"0.8s"}).isotope("layout")})}),p(document).on("vc-tab-clicked",function(e,t){p('[data-layout="fitRows"]',t).each(function(){p(this).isotope("layout")})}),p(e).each(function(){if("filter-isotope"==p(this).data("filter-style"))p("a",p(this)).on("click",function(e){e.preventDefault();var t=p(this).parent().attr("data-filter_id"),i=p('.property-content[data-filter_id="'+t+'"]'),r=!0;if(p(this).hasClass("active-filter")&&(r=!1),h&&r){var a=p(this).attr("data-filter");i.isotope({filter:a}),p(this).parent().children("a").css("cursor","pointer"),p(this).parent().children("a").removeClass("active-filter"),p(this).addClass("active-filter"),p(this).css("cursor","not-allowed");var o=p(this).parent().next().children("select");o.removeAttr("disabled"),o.children("option").removeAttr("selected"),o.children('option[value="'+a+'"]').attr("selected","selected"),o.val()!=a&&o.selectize()[0].selectize.setValue(a)}});else{var e=p("a",p(this));m.executeFilter("filterRow",e)}})},executeFilter:function(f,u){u.on("click",function(e){e.preventDefault();var i=p(this),t=i.parent().attr("data-filter_id"),r=p('.property-content[data-filter_id="'+t+'"]'),a=r.parent();if(i.hasClass("active-filter"))return i.css("cursor","not-allowed"),!1;if(i.parent().children("a").css("cursor","wait"),h){h=!1;var o=i.data("filter"),s=i.parent().next().children("select");if(m.vars.filter_id=i.parent().data("filter_id"),i.parent().find(".active-filter").removeClass("active-filter"),i.addClass("active-filter"),a.css("height",a.outerHeight()),void 0===m.vars.property_items[o+"-"+m.vars.filter_id]){i.css("width",i.outerWidth());var l=i.data("filter");"*"===l&&(l="");var c=u.closest(".filter-inner").data("admin-url");p.ajax({url:c,data:{action:"ere_property_gallery_fillter_ajax",is_carousel:i.parent().data("is-carousel"),columns_gap:i.parent().data("columns-gap"),columns:i.parent().data("columns"),property_type:l,item_amount:i.parent().data("item-amount"),image_size:i.parent().data("image-size"),color_scheme:i.parent().data("color_scheme")},success:function(e){var t=p(".property-item",e);m.vars.property_items[o+"-"+m.vars.filter_id]=e,r.css("opacity",0),"filterRow"==f?r.isotope("destroy"):r.trigger("destroy.owl.carousel"),r.html(t),"filterRow"==f&&ERE.set_item_effect(t,"hide"),r.css("opacity",1),r.imagesLoaded(function(){"filterCarousel"==f?(ERE.set_item_effect(t,"hide"),ERE_Carousel.owlCarousel()):m.filterRow(),t=p(".property-item",r),ERE.set_item_effect(t,"show"),setTimeout(function(){a.css("height","auto")},200)}),setTimeout(function(){i.css("width","auto")},100),h=!0,s.removeAttr("disabled"),s.children("option").removeAttr("selected"),s.children('option[value="'+o+'"]').attr("selected","selected"),i.parent().children("a").css("cursor","pointer"),i.parent().children(".active-filter").css("cursor","not-allowed")},error:function(){h=!0}})}else{var n=m.vars.property_items[o+"-"+m.vars.filter_id],d=p(".property-item",n);"filterRow"==f&&r.isotope("destroy"),r.css("opacity",0),"filterCarousel"==f&&r.trigger("destroy.owl.carousel"),r.html(d),ERE.set_item_effect(d,"hide"),r.css("opacity",1),"filterCarousel"==f&&ERE_Carousel.owlCarousel(),r.imagesLoaded(function(){d=p(".property-item",r),ERE.set_item_effect(d,"show"),setTimeout(function(){a.css("height","auto")},200),"filterRow"==f&&m.filterRow()}),h=!0,s.removeAttr("disabled"),s.children("option").removeAttr("selected"),s.children('option[value="'+o+'"]').attr("selected","selected"),i.parent().children("a").css("cursor","pointer"),i.parent().children(".active-filter").css("cursor","not-allowed")}}})},resize:function(){p(window).resize(function(){m.executeResize()}),p(window).on("orientationchange",function(){m.executeResize()})},executeResize:function(){p(".property-content.owl-carousel").each(function(){var t=p(this);setTimeout(function(){var e=p(".property-item",t);ERE.set_item_effect(e,"show")},500)})}};p(document).ready(function(){m.init()})}(jQuery);