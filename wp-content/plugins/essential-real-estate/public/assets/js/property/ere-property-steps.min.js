!function(e){"use strict";var t={init:function(){this.cacheDOM(),this.setupAria(),this.nextButton(),this.prevButton(),this.validateForm(),this.editForm(),this.killEnterKey(),this.handleStepClicks()},cacheDOM:function(){this.$formParent=e(".ere-property-multi-step"),this.$form=this.$formParent.find("form"),this.$formStepParents=this.$form.find("fieldset"),this.$nextButton=this.$form.find(".ere-btn-next"),this.$prevButton=this.$form.find(".ere-btn-prev"),this.$editButton=this.$form.find(".ere-btn-edit"),this.$stepsParent=e(".ere-steps"),this.$steps=this.$stepsParent.find("button")},htmlClasses:{activeClass:"active",hiddenClass:"hidden",visibleClass:"visible",editFormClass:"edit-form",animatedVisibleClass:"animated fadeIn",animatedHiddenClass:"animated fadeOut",animatingClass:"animating"},setupAria:function(){this.$formStepParents.eq(0).attr("aria-hidden",!1),this.$formStepParents.not(":first").attr("aria-hidden",!0),t.handleAriaExpanded()},nextButton:function(){this.$nextButton.on("click",function(r){r.preventDefault();var s=e(this),i=s.closest("fieldset"),a=i.next();t.checkForValidForm()&&(i.removeClass(t.htmlClasses.visibleClass),t.showNextStep(i,a))})},prevButton:function(){this.$prevButton.on("click",function(r){r.preventDefault();var s=e(this),i=s.closest("fieldset"),a=i.prev();i.removeClass(t.htmlClasses.visibleClass),t.showPrevStep(i,a)})},showNextStep:function(e,r){e.addClass(t.htmlClasses.hiddenClass).attr("aria-hidden",!0),r.removeClass(t.htmlClasses.hiddenClass).addClass(t.htmlClasses.visibleClass).attr("aria-hidden",!1),r.focus(),t.handleState(r.index()),t.handleAriaExpanded()},showPrevStep:function(e,r){e.addClass(t.htmlClasses.hiddenClass).attr("aria-hidden",!0),r.removeClass(t.htmlClasses.hiddenClass).addClass(t.htmlClasses.visibleClass).attr("aria-hidden",!1),r.focus(),t.handleState(r.index()),t.handleAriaExpanded()},handleAriaExpanded:function(){e.each(this.$nextButton,function(t,r){var s=e(r).attr("aria-controls");"true"==e("#"+s).attr("aria-hidden")?e(r).attr("aria-expanded",!1):e(r).attr("aria-expanded",!0)}),e.each(this.$prevButton,function(t,r){var s=e(r).attr("aria-controls");"true"==e("#"+s).attr("aria-hidden")?e(r).attr("aria-expanded",!1):e(r).attr("aria-expanded",!0)})},checkFieldRequired:function(e){return 1==e},validateForm:function(){var t=ere_property_steps_vars.property_title,r=ere_property_steps_vars.property_price,s=ere_property_steps_vars.property_type,i=ere_property_steps_vars.property_label,a=ere_property_steps_vars.property_price_prefix,p=ere_property_steps_vars.property_price_postfix,d=ere_property_steps_vars.property_rooms,n=ere_property_steps_vars.property_bedrooms,o=ere_property_steps_vars.property_bathrooms,l=ere_property_steps_vars.property_size,h=ere_property_steps_vars.property_land,c=ere_property_steps_vars.property_garage,u=ere_property_steps_vars.property_year,_=ere_property_steps_vars.property_address;this.$form.validate({ignore:":hidden",errorElement:"span",invalidHandler:function(t,r){e.each(r.errorList,function(t,r){0===t&&e(r.element).focus(),e(r.element).attr("aria-invalid",!0)})},rules:{property_title:{required:this.checkFieldRequired(t)},property_price_short:{required:this.checkFieldRequired(r),number:!0},property_type:{required:this.checkFieldRequired(s)},property_label:{required:this.checkFieldRequired(i)},property_price_prefix:{required:this.checkFieldRequired(a)},property_price_postfix:{required:this.checkFieldRequired(p)},property_size:{required:this.checkFieldRequired(l),number:!0},property_land:{required:this.checkFieldRequired(h),number:!0},property_rooms:{required:this.checkFieldRequired(d),number:!0},property_bedrooms:{required:this.checkFieldRequired(n),number:!0},property_bathrooms:{required:this.checkFieldRequired(o),number:!0},property_garage:{required:this.checkFieldRequired(c),number:!0},property_year:{required:this.checkFieldRequired(u),number:!0},property_map_address:{required:this.checkFieldRequired(_)}},messages:{property_title:"",property_des:"",property_price_short:"",property_rooms:"",property_bedrooms:"",property_bathrooms:"",property_size:"",property_map_address:"",property_type:"",property_label:"",property_price_prefix:"",property_price_postfix:"",property_land:"",property_garage:"",property_year:""},submitHandler:function(e){e.submit()}})},checkForValidForm:function(){return this.$form.valid()?!0:void 0},handleState:function(e){this.$steps.eq(e).prevAll().removeAttr("disabled"),this.$steps.eq(e).addClass(t.htmlClasses.activeClass),0===e&&(this.$steps.removeClass(t.htmlClasses.activeClass).attr("disabled","disabled"),this.$steps.eq(0).addClass(t.htmlClasses.activeClass))},editForm:function(){var e=this.$formParent,r=this.$formStepParents;this.$stepsParent;this.$editButton.on("click",function(){e.toggleClass(t.htmlClasses.editFormClass),r.attr("aria-hidden",!1),r.eq(0).find("input").eq(0).focus(),t.handleAriaExpanded()})},killEnterKey:function(){e(document).on("keypress",":input:not(textarea,button)",function(e){return 13!=e.keyCode})},handleStepClicks:function(){var r=this.$steps,s=this.$formStepParents;r.on("click",function(i){i.preventDefault();var a=e(this).index();r.nextAll().removeClass(t.htmlClasses.activeClass).attr("disabled",!0),e(this).addClass(t.htmlClasses.activeClass).attr("disabled",!1),s.removeClass(t.htmlClasses.visibleClass).addClass(t.htmlClasses.hiddenClass).attr("aria-hidden",!0),s.eq(a).removeClass(t.htmlClasses.hiddenClass).addClass(t.htmlClasses.visibleClass).attr("aria-hidden",!1).focus()})}};0!=e(".ere-property-multi-step").size()&&t.init()}(jQuery);